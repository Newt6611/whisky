use crate::{core::builder::serialize_tx_body, *};
use model::{MeshTxBuilderBody, Protocol};
use wasm::WasmResult;

/// ## WASM Transaction building method
///
/// Serialize the transaction body
///
/// ### Arguments
///
/// * `mesh_tx_builder_body_json` - The transaction builder body information, serialized as JSON string
/// * `params_json` - Optional protocol parameters, default as Cardano mainnet configuration, serialized as JSON string
///
/// ### Returns
///
/// * `String` - the built transaction hex
#[wasm_bindgen]
pub fn js_serialize_tx_body(mesh_tx_builder_body_json: &str, params_json: &str) -> WasmResult {
    let mesh_tx_builder_body: MeshTxBuilderBody =
        match serde_json::from_str(mesh_tx_builder_body_json) {
            Ok(mesh_tx_builder_body) => mesh_tx_builder_body,
            Err(e) => {
                return WasmResult::new_error(
                    "failure".to_string(),
                    format!("Invalid JSON: {:?}", e),
                )
            }
        };

    let params: Option<Protocol> = match serde_json::from_str(params_json) {
        Ok(params) => Some(params),
        Err(e) => {
            return WasmResult::new_error(
                "failure".to_string(),
                format!("Invalid Protocol Param JSON: {:?} \n {:?}", params_json, e),
            )
        }
    };

    match serialize_tx_body(mesh_tx_builder_body, params) {
        Ok(tx_hex) => WasmResult::new("success".to_string(), tx_hex.to_string()),
        Err(e) => WasmResult::new_error("failure".to_string(), format!("{:?}", e)),
    }
}

#[test]
fn test_js_serialize_tx_body() {
    let mesh_tx_builder_body_json = r#"{"inputs":[{"pubKeyTxIn":{"txIn":{"txHash":"056d0fe3d3cc84058ccd8da7965382452aafd84d30f83420b86fba5e28a6cb31","txIndex":0,"amount":[{"unit":"lovelace","quantity":"9187239"}],"address":"addr1qywywxe3ag9sf3jjhk8hdv3e46jl2ufehhz69v52k8nfza0a8f4leccdwaz2c40fe7g5dk9z5p8v07evuthxnp3xqefs2pw5yg"}}},{"pubKeyTxIn":{"txIn":{"txHash":"04a9ed29ab39b9b93086dfd21b8f8ba79b1ac01185f75d78e94a9bca1d8746b1","txIndex":1,"amount":[{"unit":"lovelace","quantity":"22347350"},{"unit":"772791eb3f4b92874a49d487375a90db631988291c1a643b817668ca4d616420446f6720546f6b656e","quantity":"5167797601"},{"unit":"7967f354b44b274c7b8ebbdf432aebe7a12e8ed743238930a9a1c81253485f53746172626173655f57616e64657265725f343233","quantity":"1"},{"unit":"7c24cb53f56179cbd2cac72563728ffca488db02734b7a645740e35544454649303237","quantity":"1"},{"unit":"7de3404b8c35d46fa9419b989117da27e2f3e5c1540a48049ad56b2041424853787769746873706163657331373335","quantity":"1"},{"unit":"7e605894cdcbe8d1933f0a8760d93bd121aca583cf21ad1c25e51fd34d6164446f67436172436c756237303431","quantity":"1"},{"unit":"7f1c307a181f99395e830af0b34fccd4e0d31b71dfd986daa02177ae47696674","quantity":"5"},{"unit":"7f25fd346505b3a0822aaff2c4d8cce72e404d28ecd369e3dc5405fb0014df104172696761546f6b656e","quantity":"20"},{"unit":"804f5544c1962a40546827cab750a88404dc7108c0f588b72964754f56594649","quantity":"6441422"},{"unit":"82ee6b6e82aac09ecc96744c879e87403629df056b8b0be8d7c7595677696e746572","quantity":"1"},{"unit":"837f24191e901d486df3783af8da8add0eeeb6f268e2ad2cee16d4fe6d6961786933","quantity":"1"},{"unit":"837f24191e901d486df3783af8da8add0eeeb6f268e2ad2cee16d4fe6d6961786934","quantity":"1"},{"unit":"8453315b827cc45de33ddb115ebf4b5ab39eb76df7f1355887f23186417665726167654265617233323933","quantity":"1"},{"unit":"84c0acb101c14416ad92859c429058871e201804468d5f353be31d7150756e6b7374657241727437333934","quantity":"1"},{"unit":"85410f0a73b09aff76841211b2ebd08a4f14f717f9d23908ca28f2ad0501f1730754fc6fcd2a60b7b7e08a971a8194e41f39839123884e7f4e5565fb","quantity":"1"},{"unit":"85410f0a73b09aff76841211b2ebd08a4f14f717f9d23908ca28f2adb1f39b954203c5a58d1ddaec4c36728763f55331d01674b0ce9444c237f7c680","quantity":"1"},{"unit":"862cd06c4504de6114a29e0b863751ee84ad455493d43aeeb727d8964465786f576f726c6436393232","quantity":"1"},{"unit":"86d318effcb8b09f4a8c7c4bddb70b9745d9772b35235853f01046245368617065733032343233","quantity":"1"},{"unit":"86d318effcb8b09f4a8c7c4bddb70b9745d9772b35235853f01046245368617065733037353438","quantity":"1"},{"unit":"86d318effcb8b09f4a8c7c4bddb70b9745d9772b35235853f01046245368617065733231383238","quantity":"1"},{"unit":"86d318effcb8b09f4a8c7c4bddb70b9745d9772b35235853f01046245368617065733238343330","quantity":"1"},{"unit":"86d318effcb8b09f4a8c7c4bddb70b9745d9772b35235853f01046245368617065733332303431","quantity":"1"},{"unit":"884892bcdc360bcef87d6b3f806e7f9cd5ac30d999d49970e7a903ae5041564941","quantity":"76"},{"unit":"8903555ad05ed1794f26240d44137717d0c8049e9133266222c4186a44616973756b6530363831","quantity":"1"},{"unit":"89ee9ed7ce189c466be5937af4dc9103d71cc9ec150efdf158d4fe1343617264616e6f417065334432393935","quantity":"1"},{"unit":"8b4e239aef4d1d1bc5dd628ff3ce34d392d632e5cda83e42d6fcb1cc5865726368657232393136","quantity":"1"},{"unit":"8d397c8fe1b8599862054862c28e5547da52883a74e9acceefc18df3424478454747313830","quantity":"1"},{"unit":"8d50097668d9b08ec2103628dec3d4f833b02e797c5c08e73afc7df8000643b05255474c49544f","quantity":"1"},{"unit":"8d50097668d9b08ec2103628dec3d4f833b02e797c5c08e73afc7df80014df105255474c49544f","quantity":"1"},{"unit":"8db269c3ec630e06ae29f74bc39edd1f87c819f1056206e879a1cd61446a65644d6963726f555344","quantity":"2798"},{"unit":"8e0829598ee023424bf6a8e178c2f10c5e51f0fbc8316eacdbd42af043617264616e6f4275647a4d6179347468","quantity":"1"},{"unit":"8f80ebfaf62a8c33ae2adf047572604c74db8bc1daba2b43f9a6563543617264616e6f57617272696f7233383935","quantity":"1"},{"unit":"8f80ebfaf62a8c33ae2adf047572604c74db8bc1daba2b43f9a6563543617264616e6f57617272696f7234353838","quantity":"1"},{"unit":"8f80ebfaf62a8c33ae2adf047572604c74db8bc1daba2b43f9a6563543617264616e6f57617272696f7236353038","quantity":"1"},{"unit":"91b903ccbd3cfde23ff98a768c8dc63c22383866f252f12ed92972a173656e736569616461726f696430303435","quantity":"1"},{"unit":"925efcef2e60cb0b240c38c763172dfd87a1f6fc409cd683dd420e5b84226344387d5c1823a4184b074d872875d40bc5cae3cd2c98f9bbb9c3fc31f1","quantity":"1"},{"unit":"92776616f1f32c65a173392e4410a3d8c39dcf6ef768c73af164779c4d79555344","quantity":"1000000"},{"unit":"939460eb8752471b6bbd3b21f76d664d7b296ec937444f80e0fcd786000de140746573744349503638","quantity":"1"},{"unit":"95c248e17f0fc35be4d2a7d186a84cdcda5b99d7ad2799ebe98a986561776f6b656e3633","quantity":"1"},{"unit":"95c248e17f0fc35be4d2a7d186a84cdcda5b99d7ad2799ebe98a986561776f6b656e3134343237","quantity":"1"},{"unit":"97305ec3684b4e5ac2977d44ee05fd453b038ae882e665fd6499484c456e70696d6f6e7943616e61646154656d706c6172303134","quantity":"1"},{"unit":"97305ec3684b4e5ac2977d44ee05fd453b038ae882e665fd6499484c456e70696d6f6e79436f6c6f6d626961417263686572303132","quantity":"1"},{"unit":"97305ec3684b4e5ac2977d44ee05fd453b038ae882e665fd6499484c456e70696d6f6e79436f6c6f6d6269614b6e69676874313038","quantity":"1"},{"unit":"97305ec3684b4e5ac2977d44ee05fd453b038ae882e665fd6499484c456e70696d6f6e794e65775a65616c616e644b6e69676874303135","quantity":"1"},{"unit":"97305ec3684b4e5ac2977d44ee05fd453b038ae882e665fd6499484c456e70696d6f6e794e65775a65616c616e644b6e69676874303136","quantity":"1"},{"unit":"97305ec3684b4e5ac2977d44ee05fd453b038ae882e665fd6499484c456e70696d6f6e794e65775a65616c616e6454656d706c6172303139","quantity":"1"},{"unit":"973adfc28b03fb28a8dda1be23f186b720b248d46490fda2d9ae59a568617070707930303037","quantity":"1"},{"unit":"973adfc28b03fb28a8dda1be23f186b720b248d46490fda2d9ae59a568617070707930303135","quantity":"1"},{"unit":"973adfc28b03fb28a8dda1be23f186b720b248d46490fda2d9ae59a568617070707930303938","quantity":"1"},{"unit":"973adfc28b03fb28a8dda1be23f186b720b248d46490fda2d9ae59a568617070707930303939","quantity":"1"},{"unit":"973adfc28b03fb28a8dda1be23f186b720b248d46490fda2d9ae59a568617070707930313636","quantity":"1"},{"unit":"973adfc28b03fb28a8dda1be23f186b720b248d46490fda2d9ae59a568617070707930333332","quantity":"1"},{"unit":"973adfc28b03fb28a8dda1be23f186b720b248d46490fda2d9ae59a568617070707930343239","quantity":"1"},{"unit":"973adfc28b03fb28a8dda1be23f186b720b248d46490fda2d9ae59a568617070707930373137","quantity":"1"},{"unit":"98ddc5411f755f9ba82a1c78c4006dad3a1e5035035d68dc58aaa1bf445241474f4e434841524d2031323938","quantity":"1"},{"unit":"9997c9e9e6d0c2f516a2f2229fa39bff9c30b729e3e02679a422d6ec6b6964796f6b616931303239","quantity":"1"},{"unit":"9997c9e9e6d0c2f516a2f2229fa39bff9c30b729e3e02679a422d6ec6b6964796f6b616932343731","quantity":"1"},{"unit":"9a2ec5c92daccbb269611a9eae7a40f9788d3f9c0229661b6234286f000de1406f766f3232","quantity":"1"},{"unit":"9a2ec5c92daccbb269611a9eae7a40f9788d3f9c0229661b6234286f000de1406f766f3337","quantity":"1"},{"unit":"9a9693a9a37912a5097918f97918d15240c92ab729a0b7c4aa144d7753554e444145","quantity":"2804076767"},{"unit":"9c355c4821d3941d29656586cc566fe89783d3d2dee26a130907eeb30014df104172696761546f6b656e","quantity":"20"},{"unit":"9ce2253eca3c730d2f2c29cbaa90806ab006e08a6d8d7604bf3f74e663727970746f74726169747330303035","quantity":"1"},{"unit":"9d4c40c114d3d69d4f8209e205686db296683073c0ca5c63a8d2456e4c696f6e65737334313633","quantity":"1"},{"unit":"9d4c40c114d3d69d4f8209e205686db296683073c0ca5c63a8d2456e4c696f6e65737334313830","quantity":"1"},{"unit":"9dc05b83ac10a6490dcae16b41b00ccf2a036593f5a1f2b9bedef5e347524e5431","quantity":"11"},{"unit":"9def2b8de3736fdbd611109878e3ac44f46c352ae51961ea34f0d29646616861646f756b656e31304b7632353236","quantity":"1"},{"unit":"9fd1333b6fa38ceb957b089398a2dc32727cf0bd4e60bf43c308609b4d6f624d6567616d69416b756e696e32383130","quantity":"1"},{"unit":"a0028f350aaabe0545fdcb56b039bfb08e4bb4d8c4d7c3c7d481c235484f534b59","quantity":"967390162"},{"unit":"a04ce7a52545e5e33c2867e148898d9e667a69602285f6a1298f9d68","quantity":"24"},{"unit":"a1c1e3811c5adb591e026164a519eaf3d2708ee02e5712f891f80b78464142","quantity":"9375"},{"unit":"a2d79509e04502b4b792f0196dca9f269a0b60d612672f0502da7c304a4f5244414e3233303330","quantity":"1"},{"unit":"a2e719d70b9d71636aa825e71c11ca508ecf98eec87182b0e526d7c5000de1404f5554504f53543031383838","quantity":"1"},{"unit":"a8830ba155386c9837f7fd86ae8917265747fdb55a440634f058639d4c696f6e43756230303536","quantity":"1"},{"unit":"a8830ba155386c9837f7fd86ae8917265747fdb55a440634f058639d4c696f6e43756230323032","quantity":"1"},{"unit":"abff605d568a93be945e07422398a1aeb8d0aa41cf73ff11d42b347474657374","quantity":"3"},{"unit":"accaf1783286811bba4124ab328b70742ed5e286b284d3e18c4e29f4656c7261756c69746f","quantity":"1"},{"unit":"aebcb6eaba17dea962008a9d693e39a3160b02b5b89b1c83e537c599","quantity":"43051405112685"},{"unit":"aec5a6dac10ec781df9f337d33ef7d55b9b48535668b8038affa326c4c696c476f61743034313733","quantity":"1"},{"unit":"aec5a6dac10ec781df9f337d33ef7d55b9b48535668b8038affa326c4c696c476f61743036343135","quantity":"1"},{"unit":"af2e27f580f7f08e93190a81f72462f153026d06450924726645891b44524950","quantity":"1000000000"},{"unit":"af4bdecba25c009b570e2368f7c8f3459f5d57d46bd7f01afd4dcaf5726f6c6567677330303031","quantity":"1"},{"unit":"af4bdecba25c009b570e2368f7c8f3459f5d57d46bd7f01afd4dcaf5726f6c6567677330303032","quantity":"1"},{"unit":"af4bdecba25c009b570e2368f7c8f3459f5d57d46bd7f01afd4dcaf5726f6c6567677330303033","quantity":"1"},{"unit":"af4bdecba25c009b570e2368f7c8f3459f5d57d46bd7f01afd4dcaf5726f6c6567677330303034","quantity":"1"},{"unit":"af4bdecba25c009b570e2368f7c8f3459f5d57d46bd7f01afd4dcaf5726f6c6567677330303035","quantity":"1"},{"unit":"af4bdecba25c009b570e2368f7c8f3459f5d57d46bd7f01afd4dcaf5726f6c6567677330303036","quantity":"1"},{"unit":"af4bdecba25c009b570e2368f7c8f3459f5d57d46bd7f01afd4dcaf5726f6c6567677330303037","quantity":"1"},{"unit":"af4bdecba25c009b570e2368f7c8f3459f5d57d46bd7f01afd4dcaf5726f6c6567677330303038","quantity":"1"},{"unit":"af4bdecba25c009b570e2368f7c8f3459f5d57d46bd7f01afd4dcaf5726f6c6567677330303039","quantity":"1"},{"unit":"af4bdecba25c009b570e2368f7c8f3459f5d57d46bd7f01afd4dcaf5726f6c6567677330303130","quantity":"1"},{"unit":"afa25c8d9a5725e33dbe28f57923a0e77989532c50bbfdf942862be34461696c79446f7365564554436f6d6d6f6e3138","quantity":"1"},{"unit":"afc910d7a306d20c12903979d4935ae4307241d03245743548e767834153484942","quantity":"1000000000"},{"unit":"b001076b34a87e7d48ec46703a6f50f93289582ad9bdbeff7f1e32954879706562656173747330343835","quantity":"1"},{"unit":"b001076b34a87e7d48ec46703a6f50f93289582ad9bdbeff7f1e32954879706562656173747331363039","quantity":"1"},{"unit":"b001076b34a87e7d48ec46703a6f50f93289582ad9bdbeff7f1e32954879706562656173747331373737","quantity":"1"},{"unit":"b001076b34a87e7d48ec46703a6f50f93289582ad9bdbeff7f1e32954879706562656173747331383939","quantity":"1"},{"unit":"b001076b34a87e7d48ec46703a6f50f93289582ad9bdbeff7f1e32954879706562656173747333373336","quantity":"1"},{"unit":"b001076b34a87e7d48ec46703a6f50f93289582ad9bdbeff7f1e32954879706562656173747333383238","quantity":"1"},{"unit":"b001076b34a87e7d48ec46703a6f50f93289582ad9bdbeff7f1e32954879706562656173747334333039","quantity":"1"},{"unit":"b001076b34a87e7d48ec46703a6f50f93289582ad9bdbeff7f1e32954879706562656173747334363033","quantity":"1"},{"unit":"b034bacc10e558667ff2aedc33804a42d3f142c324acafb6f16ce24d6268313430","quantity":"1"},{"unit":"b034bacc10e558667ff2aedc33804a42d3f142c324acafb6f16ce24d6268323134","quantity":"1"},{"unit":"b034bacc10e558667ff2aedc33804a42d3f142c324acafb6f16ce24d6268343432","quantity":"1"},{"unit":"b06b24176f6feed7f6af241f12333b146497a43b13afad1c66699dea546865576f726b696e674465616432393438","quantity":"1"},{"unit":"b211283237d50e5fae22fef8dda898297a02ebe8d36be51f17ff33916d616e676132636f76657230303130","quantity":"1"},{"unit":"b24a29b9c16d349df16d9b5553b119e399e46ae19d6150c1a843ef61646964697473","quantity":"50000000"},{"unit":"b2f4b5123d28edf910fdc558f45290a8908012a1ba7ad73221dab3444469676974616c4c6f776c6966657353325f30303337","quantity":"1"},{"unit":"b2f4b5123d28edf910fdc558f45290a8908012a1ba7ad73221dab3444469676974616c4c6f776c6966657353325f30303338","quantity":"1"},{"unit":"b43131f2c82825ee3d81705de0896c611f35ed38e48e33a3bdf298dc43727970746f4d6167653035393136","quantity":"1"},{"unit":"b60d598a9b36f2349e6b3d0d2dadd9dc6c56ca2daf483844c2d0c5004469676974616c204c6f776c696665202332353838","quantity":"1"},{"unit":"b7761c472eef3b6e0505441efaf940892bb59c01be96070b0a0a89b343617264616e6f57617272696f727349736c616e647332343439","quantity":"1"},{"unit":"b7761c472eef3b6e0505441efaf940892bb59c01be96070b0a0a89b343617264616e6f57617272696f727349736c616e647338363234","quantity":"1"},{"unit":"b90d3113f9e06a918adac5671ffda679416764d206ac6940c9b1ebb5544553542041495244524f5020313030","quantity":"1"},{"unit":"b90f090c86148b8a703326bb2b2c3b6d7c222a1fad2355a3dac6ac3963617264616e6f667269656e647330303937","quantity":"1"},{"unit":"b97919795280e20e60b8b3f222ba9e42f101e10d03ca4d29586f005c43617264616e6f4275647a48315331333033","quantity":"1"},{"unit":"bbd0ec94cf9ccc1407b3dbc66bfbbff82ea49718ae4e3dceb817125f24574f524b","quantity":"4400"},{"unit":"bcf9ce45e986b8f57fbcece6ab456c39adca4ebdc2dd9113c5574b1f43617264616e6f4361744279726f6e476c617373657332343133","quantity":"1"},{"unit":"bf0fef7d6a759b28e525f6a44136b18789d3cafe1219cea18673173474657374","quantity":"1"},{"unit":"c48cbb3d5e57ed56e276bc45f99ab39abe94e6cd7ac39fb402da47ad0014df105553444d","quantity":"499777876"},{"unit":"c6d5c8531a46b922289cd17fe7b00d76cbb9b66b5f9f7f6a982bffcf5348534547475f31385f35","quantity":"1"},{"unit":"c881c20e49dbaca3ff6cef365969354150983230c39520b917f5cf7c4e696b65","quantity":"586"},{"unit":"c88bbd1848db5ea665b1fffbefba86e8dcd723b5085348e8a8d2260f44414e41","quantity":"9000000"},{"unit":"c96215c844a4dc49075c29c003a025f493e1ba56e75b3d10161e1a1463617264616e6f7761696675733030313174657374","quantity":"1"},{"unit":"c96215c844a4dc49075c29c003a025f493e1ba56e75b3d10161e1a1463617264616e6f7761696675733030313874657374","quantity":"1"},{"unit":"c9f082d0e2e1c46d7e43dc2633b91054841001ee618004de22f66a8e3037383964393634393833383264326263663730363265333030633830616133","quantity":"1"},{"unit":"c9f082d0e2e1c46d7e43dc2633b91054841001ee618004de22f66a8e3161323463623961316262636131386236316138353934616161373363353134","quantity":"1"},{"unit":"c9f082d0e2e1c46d7e43dc2633b91054841001ee618004de22f66a8e3261663331303831303933316235373939616637393137646138383061386131","quantity":"1"},{"unit":"c9f082d0e2e1c46d7e43dc2633b91054841001ee618004de22f66a8e3565633665373561396264333839323031633462393237616336346132326632","quantity":"1"},{"unit":"c9f082d0e2e1c46d7e43dc2633b91054841001ee618004de22f66a8e3833653865353261396439333430383233626566643939656466663935303162","quantity":"1"},{"unit":"c9f082d0e2e1c46d7e43dc2633b91054841001ee618004de22f66a8e6164306632646363643464666365346461333164306438356432323166326366","quantity":"1"},{"unit":"c9f082d0e2e1c46d7e43dc2633b91054841001ee618004de22f66a8e6266316264346435643261633332616336303330356334656233633632633838","quantity":"1"},{"unit":"c9f082d0e2e1c46d7e43dc2633b91054841001ee618004de22f66a8e6630366439346636646639363535623136656536393838633834396136636561","quantity":"1"},{"unit":"cb653347a5175bc3ecd99801ad22bd043b5f8d466ce5f151a2bf899d3761616536643139323563373830343630363837363966353033363362656561","quantity":"1"},{"unit":"cb653347a5175bc3ecd99801ad22bd043b5f8d466ce5f151a2bf899d6565636438626336646230363933636463663630653961643864613538313734","quantity":"1"},{"unit":"cb858fa896089cae8a16a84b9955d447e5d4ac0de76106e8a79dd38d4c696665476966743134","quantity":"1"},{"unit":"cd4f09ef0a8f9a3557903d2c9a45b2f6198f1267c2031bc9228ed74a53757368694279746531343631","quantity":"1"},{"unit":"cf47d3adfe7d4f78321ba4f0b19a7ce2267fbea314eba815081bc80b313172797272627972726267797962677967676272676262676779","quantity":"1"},{"unit":"cfb6254121586b8f9026c507fe9afbdb2f24fa67681f05b346686bad46616861646f756b656e3344303237","quantity":"1"},{"unit":"cfcc08e6a1882855292f72482d778966b3350a6b0e91a9a184fe68485268696e6f47656e65726174696f6e32303932","quantity":"1"},{"unit":"d01ab0b527224d9bcf9c7537b06573bc49ff3802a5486591e544053f46454544784244313231","quantity":"1"}],"address":"addr1qywywxe3ag9sf3jjhk8hdv3e46jl2ufehhz69v52k8nfza0a8f4leccdwaz2c40fe7g5dk9z5p8v07evuthxnp3xqefs2pw5yg"}}}],"outputs":[{"address":"addr1w8alf5fwd4dqcyuzya4klca7pyshc4jja88v955tu50l9mcmn4hp4","amount":[{"unit":"lovelace","quantity":"10000000"}],"datum":null,"referenceScript":null}],"collaterals":[],"requiredSignatures":[],"referenceInputs":[],"mints":[],"changeAddress":"addr1qywywxe3ag9sf3jjhk8hdv3e46jl2ufehhz69v52k8nfza0a8f4leccdwaz2c40fe7g5dk9z5p8v07evuthxnp3xqefs2pw5yg","metadata":[],"validityRange":{"invalidBefore":null,"invalidHereafter":null},"certificates":[],"signingKey":[],"withdrawals":[],"network":"mainnet"}"#;
    // let mesh_tx_builder_body_json = r#"{"inputs":[{"pubKeyTxIn":{"txIn":{"txHash":"5b0145fe7b0212a7807e7dba24997049374d965f587300a2039b73cd30806c78","txIndex":1,"amount":[{"unit":"lovelace","quantity":"1132923230"}],"address":"addr_test1qq0yavv5uve45rwvfaw96qynrqt8ckpmkwcg08vlwxxdncxk82f5wz75mzaesmqzl79xqsmedwgucwtuav5str6untqqmykcpn"}}}],"outputs":[{"address":"addr_test1wpnlxv2xv9a9ucvnvzqakwepzl9ltx7jzgm53av2e9ncv4sysemm8","amount":[{"unit":"lovelace","quantity":"1600000"}],"datum":{"hash":{"type":"Mesh","content":"supersecret"}},"referenceScript":null}],"collaterals":[{"txIn":{"txHash":"ec0c2e70b898cf531b03c9db937602e98c45378d9fa8e8a5b5a91ec5c1d7540d","txIndex":5,"amount":[{"unit":"lovelace","quantity":"5000000"}],"address":"addr_test1qq0yavv5uve45rwvfaw96qynrqt8ckpmkwcg08vlwxxdncxk82f5wz75mzaesmqzl79xqsmedwgucwtuav5str6untqqmykcpn"}}],"requiredSignatures":[],"referenceInputs":[],"mints":[],"changeAddress":"addr_test1qq0yavv5uve45rwvfaw96qynrqt8ckpmkwcg08vlwxxdncxk82f5wz75mzaesmqzl79xqsmedwgucwtuav5str6untqqmykcpn","metadata":[],"validityRange":{"invalidBefore":null,"invalidHereafter":null},"certificates":[],"signingKey":[],"withdrawals":[]}"#;
    let params_json = r#"{"epoch":0,"coinsPerUtxoSize":0,"priceMem":0,"priceStep":0,"minFeeA":0,"minFeeB":0,"keyDeposit":2000000,"maxTxSize":16384,"maxValSize":5000,"poolDeposit":500000000,"maxCollateralInputs":3,"decentralisation":0,"maxBlockSize":65536,"collateralPercent":150,"maxBlockHeaderSize":1100,"minPoolCost":"340000000","maxTxExMem":"14000000","maxTxExSteps":"10000000000","maxBlockExMem":"62000000","maxBlockExSteps":"20000000000","minFeeRefScriptCostPerByte":15}"#;
    let tx_build_result = js_serialize_tx_body(mesh_tx_builder_body_json, params_json);
    println!("{:?}", tx_build_result);
}
